#!/bin/make
#-----------------------------------------------------------------------
#       NASA/GSFC, Data Assimilation Office, Code 910.3, GEOS/DAS      !
#-----------------------------------------------------------------------
# CVS $Id$
# CVS $Name: MCT_1_0_12 $ 
#-----------------------------------------------------------------------
#BOP
#
# !ROUTINE: Makefile.conf.OSF1
# 
# !DESCRIPTION: 
#	An included local make configuration.  See file Makefile for
#   detailed `make' procedure.  This shell has been built to override
#   the default environments (including commands) defined in file 
#   Makefile.
#
# !CALLING SEQUENCE:
#
#	% ln -s Makefile.conf.OSF1 Makefile.conf
#	% make ...
#
# !SEE ALSO: Makefile
#
# !REVISION HISTORY: (`cvs log <>' for more)
#	02Apr96 - J. Guo	- New make procedure
# 	21Aug95 - J. Guo	- added the prolog
#	28Sep98 - Jing Guo (guo@dao.gsfc.nasa.gov)
#		- Cleaned _Dnod for this library
# 	22Jan01 - J. Larson <larson@mcs.anl.gov> - initial version
#       09Jul02 - E. Ong <eong@mcs.anl.gov> - update for nag95 compiler
#
#EOP
#-----------------------------------------------------------------------

_Dsys		= -DsysSunOS
_Dnod		=
_DF             = $(_Dsys) $(_Dnod) $(_D)

# Environments
# ============

# Assume MPICH: Use mpif90,mpif77 to compile and link

# If using NAG95 compiler, add the following flags:
# FFLAGS = -dusty -kind=byte
# FPPFLAGS = -DNAG

# If use Sun implementation (not tested)

_LMPI		= 
_LMPI		= 
_lMPI		= 
_Inull		= 
_IMPI		= 
_IMPI		= 


# This module requires ../mpeu module

_Lmpeu          = -L../mpeu
_lmpeu          = -lmpeu
_Impeu          = -I../mpeu 
_Mmpeu		= -M../mpeu

# This module requires ../mct module

_Lmct          = -L../mct
_lmct          = -lmct
_Imct          = -I../mct 
_Mmct		= -M../mct

# Combined include/module/library path/name macros:

_I		= -I. $(_Imct) $(_Impeu) $(_IMPI)
_M		= -M. $(_Mmct) $(_Mmpeu)
_L              = $(_Lmpeu) $(_Lmct) $(_LMPI) $(_Lmath)
_l              = $(_lmct) $(_lmpeu) $(_lMPI) $(_lmath) $(_lmalloc) \
		  -lsocket -lnsl

SHELL		= /bin/sh
F77		= mpif77
F90		= mpif90
FC		= $(F90)

FOPT_normal	= -O2
FOPT_indxck	= -g 

FFLAGS		= $(FOPT_normal)

ZIP		= /usr/bin/compress
ZCAT		= /usr/bin/zcat
TAR		= /usr/bin/tar

AR		= ar cqs
RM		= rm -f

LIBprof		= -lprof

CPPFLAGS	= -C -P
F77PPFLAGS	= $(CPPFLAGS) -DLANGUAGE_FORTRAN -D__LANGUAGE_FORTRAN__
F90PPFLAGS	= $(F77PPFLAGS) -DLANGUAGE_FORTRAN_90 -D__LANGUAGE_FORTRAN_90__
FPPFLAGS	= $(F90PPFLAGS)

LD              = $(FC)
LDFLAGS         = $(FFLAGS)


.F.o:
	$(RM) $*.f
	$(FPP) $(FPPFLAGS) $(_DF) $(_I) $*.F $*.f
	$(FC) -c $(FFLAGS) $(_I) $(_M) $*.f;		\
	  if [ $$? -ne 0 ]; then $(RM) $*.o; fi
	$(RM) $*.f


.F90.o:
	$(RM) $*.f90
	$(FPP) $(FPPFLAGS) $(_DF) $(_I) $*.F90 $*.f90
	$(FC) -c $(FFLAGS) $(_I) $(_M) $*.f90;	\
	  if [ $$? -ne 0 ]; then $(RM) $*.o; fi
	$(RM) $*.f90

#.----------------------------------------------------------------------

